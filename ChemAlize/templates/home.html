<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChemAlize - Advanced Chemical Analysis</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Link to your main CSS file -->
    <link href="static/main.css" rel="stylesheet">
</head>
<body class="homepage-body">
    <!-- Theme toggle button -->
    <button class="homepage-theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon"></i>
        <span>Dark Mode</span>
    </button>

    <!-- Animated background -->
    <div class="molecules-bg" id="moleculesBg"></div>

    <!-- Loading overlay -->
    <div class="homepage-loading" id="loadingOverlay">
        <div class="homepage-spinner"></div>
    </div>

    <!-- Main header -->
    <div class="homepage-header">
        <div class="container">
            <div class="logo-container text-center">
                <div class="homepage-logo">
                    <div class="logo-icon">
                        <i class="fas fa-atom"></i>
                    </div>
                    ChemAlize
                </div>
                <p class="homepage-tagline">Chemical Analysis Without Coding</p>
            </div>
        </div>
    </div>

    <!-- Main content -->
    <main class="homepage-content">
        <div class="container">
            <div class="options-container">
                <!-- Section title -->
                <div class="section-title">
                    <h2>Choose Your Analysis Path</h2>
                    <p>Discover powerful QSAR analysis tools designed for chemists. No programming skills required - just upload your data and let ChemAlize do the work.</p>
                </div>

                <!-- Options grid -->
                <div class="options-grid">
                    <!-- Analysis option -->
                    <div class="option-card" onclick="navigateToAnalysis()">
                        <div class="option-icon analysis-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="option-title">QSAR Analysis</h3>
                        <p class="option-description">
                            Perform comprehensive quantitative structure-activity relationship analysis with automated preprocessing and machine learning models.
                        </p>
                        <ul class="option-features">
                            <li><i class="fas fa-check-circle"></i> Automated data preprocessing</li>
                            <li><i class="fas fa-check-circle"></i> Multiple ML algorithms</li>
                            <li><i class="fas fa-check-circle"></i> Interactive visualizations</li>
                            <li><i class="fas fa-check-circle"></i> Statistical validation</li>
                            <li><i class="fas fa-check-circle"></i> Export ready models</li>
                        </ul>
                        <button class="option-button analysis-button">
                            Start Analysis <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>

                    <!-- Merger option -->
                    <div class="option-card" onclick="navigateToMerger()">
                        <div class="option-icon merger-icon">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <h3 class="option-title">Data Merger</h3>
                        <p class="option-description">
                            Combine multiple datasets intelligently with automated matching, deleting duplicates, and data harmonization capabilities.
                        </p>
                        <ul class="option-features">
                            <li><i class="fas fa-check-circle"></i> Smart data matching</li>
                            <li><i class="fas fa-check-circle"></i> Delete duplicates</li>
                            <li><i class="fas fa-check-circle"></i> Multiple file formats</li>
                            <li><i class="fas fa-check-circle"></i> Data overview</li>
                            <li><i class="fas fa-check-circle"></i> Unified output format</li>
                        </ul>
                        <button class="option-button merger-button">
                            Merge Data <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Stats section -->
    <section class="homepage-stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number">1000+</span>
                    <span class="stat-label">Analyses Completed</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">15+</span>
                    <span class="stat-label">ML Algorithms</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">99.9%</span>
                    <span class="stat-label">Accuracy Rate</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="homepage-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-author">
                    <i class="fas fa-code"></i>
                    Karol Topka Kłończyński
                </div>
                <div class="footer-year">
                    © 2025
                </div>
                <div>
                    <a href="https://github.com/karoltopka" class="footer-link" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-github"></i>
                        github.com/karoltopka
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Theme management
        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.querySelector('.homepage-theme-toggle');
            const icon = themeToggle.querySelector('i');
            const text = themeToggle.querySelector('span');
            
            if (html.getAttribute('data-theme') === 'dark') {
                html.setAttribute('data-theme', 'light');
                icon.className = 'fas fa-moon';
                if (text) text.textContent = 'Dark Mode';
                localStorage.setItem('theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                icon.className = 'fas fa-sun';
                if (text) text.textContent = 'Light Mode';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            
            document.documentElement.setAttribute('data-theme', theme);
            
            const themeToggle = document.querySelector('.homepage-theme-toggle');
            const icon = themeToggle.querySelector('i');
            const text = themeToggle.querySelector('span');
            
            if (theme === 'dark') {
                icon.className = 'fas fa-sun';
                if (text) text.textContent = 'Light Mode';
            } else {
                icon.className = 'fas fa-moon';
                if (text) text.textContent = 'Dark Mode';
            }
        }

        // Create floating molecules animation
        function createMolecules() {
            const container = document.getElementById('moleculesBg');
            const numberOfMolecules = 30;

            for (let i = 0; i < numberOfMolecules; i++) {
                const molecule = document.createElement('div');
                molecule.className = 'molecule';
                molecule.style.left = Math.random() * 100 + '%';
                molecule.style.animationDelay = Math.random() * 20 + 's';
                molecule.style.animationDuration = (Math.random() * 10 + 20) + 's';
                container.appendChild(molecule);
            }
        }

        // Navigation functions
        function navigateToAnalysis() {
            showLoading();
            setTimeout(() => {
                window.location.href = '{{ url_for("preprocess") }}';
            }, 800);
        }

        function navigateToMerger() {
            showLoading();
            setTimeout(() => {
                window.location.href = '{{ url_for("merger") }}';
            }, 800);
        }

        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('active');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }

        // Hide loading when page becomes visible again (back button)
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                hideLoading();
            }
        });

        // Hide loading when page is loaded/shown
        window.addEventListener('pageshow', (e) => {
            hideLoading();
        });

        // Hide loading when page gains focus
        window.addEventListener('focus', () => {
            hideLoading();
        });

        // Ensure loading is hidden on page load
        window.addEventListener('load', () => {
            hideLoading();
        });

        // Animate stats on scroll
        function animateStats() {
            const statNumbers = document.querySelectorAll('.stat-number');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const target = entry.target;
                        const finalValue = target.textContent;
                        const numericValue = parseInt(finalValue.replace(/[^\d]/g, ''));
                        
                        if (!isNaN(numericValue)) {
                            animateCounter(target, 0, numericValue, finalValue);
                        }
                        observer.unobserve(target);
                    }
                });
            });

            statNumbers.forEach(stat => observer.observe(stat));
        }

        function animateCounter(element, start, end, finalText) {
            const duration = 2000;
            const increment = end / (duration / 16);
            let current = start;

            const timer = setInterval(() => {
                current += increment;
                if (current >= end) {
                    element.textContent = finalText;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current) + (finalText.includes('+') ? '+' : '') + (finalText.includes('%') ? '%' : '');
                }
            }, 16);
        }

        // Add hover effects to cards
        function addCardEffects() {
            const cards = document.querySelectorAll('.option-card');
            
            cards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.style.transform = 'translateY(-8px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'translateY(0) scale(1)';
                });
            });
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            createMolecules();
            animateStats();
            addCardEffects();
            
            // Add entrance animations
            const cards = document.querySelectorAll('.option-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 200 + 300);
            });
        });

        // Add some interactive elements
        document.addEventListener('mousemove', (e) => {
            const cards = document.querySelectorAll('.option-card');
            cards.forEach(card => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = (y - centerY) / 10;
                    const rotateY = (centerX - x) / 10;
                    
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-8px)`;
                }
            });
        });

        document.addEventListener('mouseleave', () => {
            const cards = document.querySelectorAll('.option-card');
            cards.forEach(card => {
                card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateY(0px)';
            });
        });

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                const theme = e.matches ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', theme);
                
                const themeToggle = document.querySelector('.homepage-theme-toggle');
                const icon = themeToggle.querySelector('i');
                const text = themeToggle.querySelector('span');
                
                if (theme === 'dark') {
                    icon.className = 'fas fa-sun';
                    if (text) text.textContent = 'Light Mode';
                } else {
                    icon.className = 'fas fa-moon';
                    if (text) text.textContent = 'Dark Mode';
                }
            }
        });
    </script>

</body>
</html>